---
interface Props {
  title: string;
  description?: string;
  lang?: string;
}

const { title, description = "Privacy-first health assistant powered by local AI", lang = "en" } = Astro.props;
const isRTL = lang === 'ar';
---

<!DOCTYPE html>
<html lang={lang} dir={isRTL ? 'rtl' : 'ltr'} class="scroll-smooth">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=5.0">
  <title>{title} | OrionHealth</title>
  <meta name="description" content={description}>

  <!-- SEO -->
  <meta property="og:title" content={title}>
  <meta property="og:description" content={description}>
  <meta property="og:type" content="website">
  <meta property="og:image" content="/og-image.png">
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:title" content={title}>
  <meta name="twitter:description" content={description}>

  <!-- Theme Color for Mobile -->
  <meta name="theme-color" content="#121212">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">

  <!-- Fira Code Font -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Fira+Code:wght@300;400;500;600;700&display=swap" rel="stylesheet">

  <style is:global>
    * {
      font-family: 'Fira Code', monospace;
    }

    /* Critical CSS Fallbacks (when Tailwind fails to load) */
    svg {
      max-width: 100%;
      height: auto;
    }

    header {
      position: fixed;
      top: 0;
      left: 0;
      right: 0;
      z-index: 50;
    }

    .fixed { position: fixed; }
    .relative { position: relative; }
    .absolute { position: absolute; }

    .flex { display: flex; }
    .hidden { display: none; }
    .grid { display: grid; }

    .items-center { align-items: center; }
    .justify-center { justify-content: center; }
    .justify-between { justify-content: space-between; }

    .text-center { text-align: center; }

    .w-4 { width: 1rem; }
    .w-5 { width: 1.25rem; }
    .w-6 { width: 1.5rem; }
    .w-8 { width: 2rem; }
    .h-4 { height: 1rem; }
    .h-5 { height: 1.25rem; }
    .h-6 { height: 1.5rem; }
    .h-8 { height: 2rem; }

    .min-h-screen { min-height: 100vh; }
    .overflow-hidden { overflow: hidden; }
    .overflow-x-hidden { overflow-x: hidden; }

    .rounded-lg { border-radius: 0.5rem; }
    .rounded-xl { border-radius: 0.75rem; }
    .rounded-full { border-radius: 9999px; }

    .gap-2 { gap: 0.5rem; }
    .gap-3 { gap: 0.75rem; }
    .gap-4 { gap: 1rem; }

    .p-4 { padding: 1rem; }
    .px-4 { padding-left: 1rem; padding-right: 1rem; }
    .py-3 { padding-top: 0.75rem; padding-bottom: 0.75rem; }

    .mb-4 { margin-bottom: 1rem; }
    .mb-6 { margin-bottom: 1.5rem; }
    .mb-8 { margin-bottom: 2rem; }

    .text-xs { font-size: 0.75rem; }
    .text-sm { font-size: 0.875rem; }
    .text-base { font-size: 1rem; }
    .text-xl { font-size: 1.25rem; }
    .text-2xl { font-size: 1.5rem; }

    .font-bold { font-weight: 700; }

    .uppercase { text-transform: uppercase; }

    @media (min-width: 768px) {
      .md\\:flex { display: flex; }
      .md\\:hidden { display: none; }
      .md\\:w-6 { width: 1.5rem; }
      .md\\:h-6 { height: 1.5rem; }
      .md\\:w-10 { width: 2.5rem; }
      .md\\:h-10 { height: 2.5rem; }
    }

    /* Cyber-Minimalism Base */
    body {
      background-color: #121212;
      color: #F5F5DC;
    }

    /* Noise Overlay - Cyber-Minimalism */
    .bg-noise {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      opacity: 0.05;
      z-index: -1;
      pointer-events: none;
      background-image: url("data:image/svg+xml,%3Csvg viewBox='0 0 400 400' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='noiseFilter'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.9' numOctaves='4' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23noiseFilter)'/%3E%3C/svg%3E");
    }

    /* Grid Pattern - Subtle */
    .bg-grid {
      background-image:
        linear-gradient(rgba(16, 185, 129, 0.02) 1px, transparent 1px),
        linear-gradient(90deg, rgba(16, 185, 129, 0.02) 1px, transparent 1px);
      background-size: 40px 40px;
    }

    /* Blob Animation Background */
    .animate-blob {
      filter: blur(100px);
      opacity: 0.06;
    }

    /* Professional Glassmorphism - Cyber Style */
    .glass {
      background: rgba(30, 30, 30, 0.6);
      backdrop-filter: blur(20px) saturate(180%);
      border: 1px solid rgba(255, 255, 255, 0.05);
    }

    .glass-dark {
      background: rgba(10, 10, 10, 0.8);
      backdrop-filter: blur(20px) saturate(180%);
      border: 1px solid rgba(255, 255, 255, 0.03);
    }

    /* Flashlight Effect - Cyber-Minimalism */
    .flashlight-card {
      position: relative;
      overflow: hidden;
    }

    .flashlight-card::before {
      content: '';
      position: absolute;
      inset: 0;
      border-radius: inherit;
      padding: 1px;
      background: radial-gradient(
        circle at var(--mouse-x, 50%) var(--mouse-y, 50%),
        rgba(16, 185, 129, 0.5),
        rgba(6, 182, 212, 0.3) 30%,
        transparent 60%
      );
      -webkit-mask:
        linear-gradient(#fff 0 0) content-box,
        linear-gradient(#fff 0 0);
      -webkit-mask-composite: xor;
      mask-composite: exclude;
      opacity: 0;
      transition: opacity 0.5s cubic-bezier(0.19, 1, 0.22, 1);
    }

    .flashlight-card:hover::before {
      opacity: 1;
    }

    /* Touch Device Optimization */
    @media (hover: none) {
      .flashlight-card::before {
        display: none;
      }
    }

    /* Smooth Transitions - Cyber-Minimalism */
    * {
      transition-timing-function: cubic-bezier(0.19, 1, 0.22, 1);
    }

    /* Stagger Animation Delays */
    .stagger-1 { animation-delay: 0.1s; }
    .stagger-2 { animation-delay: 0.2s; }
    .stagger-3 { animation-delay: 0.3s; }
    .stagger-4 { animation-delay: 0.4s; }
    .stagger-5 { animation-delay: 0.5s; }
    .stagger-6 { animation-delay: 0.6s; }

    /* Mobile-First Typography */
    .hero-title {
      font-size: clamp(2.5rem, 8vw, 6rem);
      line-height: 0.95;
    }

    .section-title {
      font-size: clamp(2rem, 6vw, 4rem);
      line-height: 1;
    }

    /* Trust Badges */
    .trust-badge {
      background: rgba(16, 185, 129, 0.1);
      border: 1px solid rgba(16, 185, 129, 0.3);
      padding: 0.5rem 1rem;
      border-radius: 9999px;
      font-size: 0.75rem;
      text-transform: uppercase;
      letter-spacing: 0.1em;
      color: #10B981;
    }

    /* Button Styles - Cyber-Minimalism */
    .btn-primary {
      background: linear-gradient(135deg, #10B981 0%, #059669 100%);
      color: #0A0A0A;
      font-weight: 700;
      text-transform: uppercase;
      letter-spacing: 0.05em;
      border-radius: 9999px;
      transition: all 0.5s cubic-bezier(0.19, 1, 0.22, 1);
    }

    .btn-primary:hover {
      transform: scale(1.02);
      box-shadow: 0 20px 40px -10px rgba(16, 185, 129, 0.4);
    }

    .btn-secondary {
      background: transparent;
      color: #F5F5DC;
      border: 1px solid rgba(255, 255, 255, 0.1);
      font-weight: 700;
      text-transform: uppercase;
      letter-spacing: 0.05em;
      border-radius: 9999px;
      transition: all 0.5s cubic-bezier(0.19, 1, 0.22, 1);
    }

    .btn-secondary:hover {
      background: rgba(255, 255, 255, 0.05);
      border-color: rgba(16, 185, 129, 0.5);
    }

    /* Responsive Container */
    .container-custom {
      width: 100%;
      max-width: 1280px;
      margin: 0 auto;
      padding: 0 1rem;
    }

    @media (min-width: 640px) {
      .container-custom { padding: 0 1.5rem; }
    }

    @media (min-width: 1024px) {
      .container-custom { padding: 0 2rem; }
    }

    /* Hide scrollbar but allow scroll */
    .hide-scrollbar {
      -ms-overflow-style: none;
      scrollbar-width: none;
    }
    .hide-scrollbar::-webkit-scrollbar {
      display: none;
    }

    /* Safe Area for Mobile */
    .safe-area-bottom {
      padding-bottom: env(safe-area-inset-bottom, 0);
    }

    .safe-area-top {
      padding-top: env(safe-area-inset-top, 0);
    }
  </style>
</head>

<body class="min-h-screen bg-background text-bone antialiased overflow-x-hidden">
  <!-- Noise Overlay -->
  <div class="bg-noise"></div>

  <!-- Grid Pattern -->
  <div class="fixed inset-0 -z-10 bg-grid"></div>

  <!-- Animated Blobs - Cyber Colors -->
  <div class="fixed inset-0 -z-10 overflow-hidden pointer-events-none">
    <div class="absolute top-1/4 left-1/4 w-64 md:w-96 h-64 md:h-96 bg-accent rounded-full animate-blob"></div>
    <div class="absolute top-1/3 right-1/4 w-64 md:w-96 h-64 md:h-96 bg-secondary rounded-full animate-blob" style="animation-delay: 2s;"></div>
    <div class="absolute bottom-1/4 left-1/3 w-64 md:w-96 h-64 md:h-96 bg-accent-dark rounded-full animate-blob" style="animation-delay: 4s;"></div>
  </div>

  <slot />

  <script>
    // Flashlight Effect (Desktop only)
    document.addEventListener('DOMContentLoaded', () => {
      if (window.matchMedia('(hover: hover)').matches) {
        const cards = document.querySelectorAll('.flashlight-card');

        cards.forEach(card => {
          card.addEventListener('mousemove', (e) => {
            const rect = card.getBoundingClientRect();
            const x = ((e.clientX - rect.left) / rect.width) * 100;
            const y = ((e.clientY - rect.top) / rect.height) * 100;

            card.style.setProperty('--mouse-x', `${x}%`);
            card.style.setProperty('--mouse-y', `${y}%`);
          });
        });
      }

      // Intersection Observer for Animations
      const observerOptions = {
        threshold: 0.1,
        rootMargin: '0px 0px -50px 0px'
      };

      const observer = new IntersectionObserver((entries) => {
        entries.forEach(entry => {
          if (entry.isIntersecting) {
            entry.target.classList.add('animate-fade-in-up');
            entry.target.style.opacity = '1';
          }
        });
      }, observerOptions);

      document.querySelectorAll('[data-animate]').forEach(el => {
        el.style.opacity = '0';
        observer.observe(el);
      });
    });
  </script>
</body>
</html>
